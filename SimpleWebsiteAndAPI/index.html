<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>My First Website</title>
	<link rel="import" href="includes/head.html">
</head>
<body>
	
    <div style="margin-left:32px; margin-top:32px;">
        <button id="btnLoadGames" class="btn btn-primary">Load Games</button>
        <div>
            <div id="manufacturerList" style="margin-top:16px;float:left;"></div>
            <div id="gameList" style="margin-top:16px;margin-left:16px;float:left;"></div>
        </div>
    </div>

    <script>
        //service("", "{}", function (response) { }, function (response) { });

        var selectedVendor = 0;

        $("#btnLoadGames").click(function () {
            var d = ""
            service("getAllConsoles", "{}",
                function (response) {
                    $.each(response, function (index, value) {
                        d += "<button id=\"btn" + value.hardwareManufacturer + "\" onClick=\"getGames(\'" + value.hardwareManufacturer + "\')\">" + value.hardwareManufacturer + "</button>";
                    });
                    $("#manufacturerList").html(d);
                }, function (response) {
                    alert("Error...");
                    console.log(response);
                });
        });

        function getGames(manufacturer) {
            var d = "<table class='table table-striped table-bordered' style='max-width:700px;'>";
            service("getByConsoleManufacturer", "{m:" + "\'" + manufacturer + "\'" + "}",
                function (response) {
                    $.each(response, function (index, value) {
                        d += "<tr>" +
                            "<td>" + value.gameName + "</td>" +
                            "<td>" + value.hardwareName + "</td>" +
                            "<td>" + value.genreName + "</td>" +
                            "</tr>";
                    });
                    $("#gameList").html(d + "</table>");
                }, function (response) {
                    alert("Error...");
                    console.log(response);
                });
        }
    </script>
</body>
</html>


